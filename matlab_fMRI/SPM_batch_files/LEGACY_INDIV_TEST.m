%%
matlabbatch{1}.spm.spatial.realign.estwrite.data = {
                                                    {
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,1'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,2'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,3'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,4'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,5'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,6'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,7'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,8'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,9'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,10'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,11'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,12'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,13'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,14'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,15'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,16'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,17'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,18'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,19'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,20'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,21'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,22'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,23'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,24'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,25'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,26'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,27'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,28'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,29'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,30'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,31'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,32'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,33'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,34'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,35'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,36'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,37'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,38'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,39'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,40'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,41'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,42'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,43'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,44'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,45'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,46'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,47'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,48'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,49'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,50'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,51'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,52'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,53'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,54'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,55'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,56'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,57'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,58'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,59'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,60'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,61'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,62'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,63'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,64'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,65'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,66'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,67'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,68'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,69'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,70'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,71'
                                                    'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub\motor_covert_fingers_sub_test_2000tr_MB3_twix_MB.nii,72'
                                                    }
                                                    }';
%%
matlabbatch{1}.spm.spatial.realign.estwrite.eoptions.quality = 0.9;
matlabbatch{1}.spm.spatial.realign.estwrite.eoptions.sep = 4;
matlabbatch{1}.spm.spatial.realign.estwrite.eoptions.fwhm = 5;
matlabbatch{1}.spm.spatial.realign.estwrite.eoptions.rtm = 0;
matlabbatch{1}.spm.spatial.realign.estwrite.eoptions.interp = 2;
matlabbatch{1}.spm.spatial.realign.estwrite.eoptions.wrap = [0 0 0];
matlabbatch{1}.spm.spatial.realign.estwrite.eoptions.weight = {''};
matlabbatch{1}.spm.spatial.realign.estwrite.roptions.which = [2 1];
matlabbatch{1}.spm.spatial.realign.estwrite.roptions.interp = 4;
matlabbatch{1}.spm.spatial.realign.estwrite.roptions.wrap = [0 0 0];
matlabbatch{1}.spm.spatial.realign.estwrite.roptions.mask = 1;
matlabbatch{1}.spm.spatial.realign.estwrite.roptions.prefix = 'r1';
matlabbatch{2}.spm.spatial.smooth.data(1) = cfg_dep('Realign: Estimate & Reslice: Resliced Images (Sess 1)', substruct('.','val', '{}',{1}, '.','val', '{}',{1}, '.','val', '{}',{1}, '.','val', '{}',{1}), substruct('.','sess', '()',{1}, '.','rfiles'));
matlabbatch{2}.spm.spatial.smooth.fwhm = [4 4 4];
matlabbatch{2}.spm.spatial.smooth.dtype = 0;
matlabbatch{2}.spm.spatial.smooth.im = 0;
matlabbatch{2}.spm.spatial.smooth.prefix = 's1';
matlabbatch{3}.spm.stats.fmri_spec.dir = {'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\NIFTI\Motor_covert_fingers_sub'};
matlabbatch{3}.spm.stats.fmri_spec.timing.units = 'scans';
matlabbatch{3}.spm.stats.fmri_spec.timing.RT = 2;
matlabbatch{3}.spm.stats.fmri_spec.timing.fmri_t = 16;
matlabbatch{3}.spm.stats.fmri_spec.timing.fmri_t0 = 1;
matlabbatch{3}.spm.stats.fmri_spec.sess.scans(1) = cfg_dep('Smooth: Smoothed Images', substruct('.','val', '{}',{2}, '.','val', '{}',{1}, '.','val', '{}',{1}), substruct('.','files'));
matlabbatch{3}.spm.stats.fmri_spec.sess.cond.name = 'Task';
matlabbatch{3}.spm.stats.fmri_spec.sess.cond.onset = [15
                                                      25
                                                      35
                                                      45
                                                      55];
matlabbatch{3}.spm.stats.fmri_spec.sess.cond.duration = 5;
matlabbatch{3}.spm.stats.fmri_spec.sess.cond.tmod = 0;
matlabbatch{3}.spm.stats.fmri_spec.sess.cond.pmod = struct('name', {}, 'param', {}, 'poly', {});
matlabbatch{3}.spm.stats.fmri_spec.sess.cond.orth = 1;
matlabbatch{3}.spm.stats.fmri_spec.sess.multi = {''};
matlabbatch{3}.spm.stats.fmri_spec.sess.regress = struct('name', {}, 'val', {});
matlabbatch{3}.spm.stats.fmri_spec.sess.multi_reg(1) = cfg_dep('Realign: Estimate & Reslice: Realignment Param File (Sess 1)', substruct('.','val', '{}',{1}, '.','val', '{}',{1}, '.','val', '{}',{1}, '.','val', '{}',{1}), substruct('.','sess', '()',{1}, '.','rpfile'));
matlabbatch{3}.spm.stats.fmri_spec.sess.hpf = 60;
matlabbatch{3}.spm.stats.fmri_spec.fact = struct('name', {}, 'levels', {});
matlabbatch{3}.spm.stats.fmri_spec.bases.hrf.derivs = [0 0];
matlabbatch{3}.spm.stats.fmri_spec.volt = 1;
matlabbatch{3}.spm.stats.fmri_spec.global = 'None';
matlabbatch{3}.spm.stats.fmri_spec.mthresh = 0.8;
matlabbatch{3}.spm.stats.fmri_spec.mask = {''};
matlabbatch{3}.spm.stats.fmri_spec.cvi = 'AR(1)';
matlabbatch{4}.spm.stats.fmri_est.spmmat(1) = cfg_dep('fMRI model specification: SPM.mat File', substruct('.','val', '{}',{3}, '.','val', '{}',{1}, '.','val', '{}',{1}), substruct('.','spmmat'));
matlabbatch{4}.spm.stats.fmri_est.write_residuals = 0;
matlabbatch{4}.spm.stats.fmri_est.method.Classical = 1;
matlabbatch{5}.spm.stats.con.spmmat(1) = cfg_dep('Model estimation: SPM.mat File', substruct('.','val', '{}',{4}, '.','val', '{}',{1}, '.','val', '{}',{1}), substruct('.','spmmat'));
matlabbatch{5}.spm.stats.con.consess{1}.tcon.name = 'Move';
matlabbatch{5}.spm.stats.con.consess{1}.tcon.weights = [1 0 0 0 0 0 0 0];
matlabbatch{5}.spm.stats.con.consess{1}.tcon.sessrep = 'none';
matlabbatch{5}.spm.stats.con.consess{2}.fcon.name = 'MotionArtifact';
matlabbatch{5}.spm.stats.con.consess{2}.fcon.weights = [0 1 0 0 0 0 0 0
                                                        0 0 1 0 0 0 0 0
                                                        0 0 0 1 0 0 0 0];
matlabbatch{5}.spm.stats.con.consess{2}.fcon.sessrep = 'none';
matlabbatch{5}.spm.stats.con.delete = 0;
matlabbatch{6}.spm.spatial.coreg.estwrite.ref = {'R:\data_generated\human\covert_mapping\SUBJECT DATA STORAGE\CMS01\Freesurfer_Reconstruction\SUMA\T1.nii,1'};
matlabbatch{6}.spm.spatial.coreg.estwrite.source(1) = cfg_dep('Realign: Estimate & Reslice: Mean Image', substruct('.','val', '{}',{1}, '.','val', '{}',{1}, '.','val', '{}',{1}, '.','val', '{}',{1}), substruct('.','rmean'));
matlabbatch{6}.spm.spatial.coreg.estwrite.other(1) = cfg_dep('Contrast Manager: All Stats Images', substruct('.','val', '{}',{5}, '.','val', '{}',{1}, '.','val', '{}',{1}), substruct('.','spm'));
matlabbatch{6}.spm.spatial.coreg.estwrite.eoptions.cost_fun = 'nmi';
matlabbatch{6}.spm.spatial.coreg.estwrite.eoptions.sep = [4 2];
matlabbatch{6}.spm.spatial.coreg.estwrite.eoptions.tol = [0.02 0.02 0.02 0.001 0.001 0.001 0.01 0.01 0.01 0.001 0.001 0.001];